var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,o=(e,o)=>{for(var r in o||(o={}))a.call(o,r)&&n(e,r,o[r]);if(t)for(var r of t(o))s.call(o,r)&&n(e,r,o[r]);return e};import{r,o as E,c as i,w as c,a as _,M as l,S as O,L as u,F as R,B as T,C as p,I as m,b as S,d,e as h,f as N,h as I,g as U,i as A,u as L,j as g,k as G,l as f,m as v,n as C,p as y,q as P,s as M,t as w,v as k,x as D,y as b,z as x,A as K,D as H,E as j,G as B,H as F,K as X,N as V,J as q,O as $,_ as z,P as W,Q as J}from"./vendor.248a1daa.js";const Y={};let Q;Y.render=function(e,t){const a=r("router-view");return E(),i(a,null,{default:c((({Component:e})=>[(E(),i(_(e)))])),_:1})};const Z={},ee=function(e,t){if(!t)return e();if(void 0===Q){const e=document.createElement("link").relList;Q=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in Z)return;Z[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":Q,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((e,t)=>{s.addEventListener("load",e),s.addEventListener("error",t)})):void 0}))).then((()=>e()))};const te=l,ae=l.Item,se=O,ne=O.Option,oe=u,re=u.Content,Ee=T,ie=p,ce=R,_e=R.Item,le=m,Oe={ROUTER_ABOUT:"about",ROUTER_HOME:"home",ROUTER_ERROR:"error",ROUTER_DASHBOARD:"dashboard",ROUTER_LOGIN:"login",ROUTER_AXIOS:"axios",ROUTER_COUNTER:"counter",ROUTER_TEST:"test",ROUTER_MOCK:"mock",ROUTER_VUEUSE:"vueuse"};const ue=S({legacy:!1,locale:"en-US",messages:(e=>{const t={};return Object.keys(e).forEach((a=>{if(e[a].default){const s=a.substr(a.lastIndexOf("/")+1).replace(".ts","");t[s]?t[s]=o(o({},e[s]),e[a].default):t[s]=e[a].default}})),t})({"./en-US.ts":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{ROUTER_HOME:"Home",ROUTER_ABOUT:"About",ROUTER_COUNTER:"Counter",ROUTER_AXIOS:"Axios",ROUTER_TEST:"Test",ROUTER_MOCK:"Mock",ROUTER_VUEUSE:"vueuse",LOGIN_USERNAME:"Username",LOGIN_PASSWORD:"Password",LOGIN_CONFIRM:"Confirm Password",LOGIN_LOGIN:"Log in",LOGIN_RESET:"Reset",LOGIN_MESSAGE_INPUT_PASSWORD:"Please input the password",LOGIN_MESSAGE_INPUT_PASSWORD_AGAIN:"Please input the password again",LOGIN_MESSAGE_CONFIRM_PASSWORD:"The second inputs don't match!",LOGIN_MESSAGE_SUCCESSED:"Login success",LOGIN_MESSAGE_FAILED:"Login fail",TOKEN_EXPIRE_MSG:"Login has expired, please log in again",AUTO_LOGIN_FAIL_MESSAGE:"Login error",LOGIN_FAIL_MESSAGE:"Wrong user name or password",LOGIN_SUCCESS_MESSAGE:"Login successful",SYMBOL_LINEBREAKER:"\n\n",SYMBOL_QUESTIONMARK:" ？",SERVER_DATA_ERROR:"Error data, please try again later",OK_TEXT:"Ok",CANCEL_TEXT:"Cancel",DELETE_TITLE:"Delete",DELETE_CONTENT:"Are you sure you want to delete?",LOCALE_ZH:"Chinese",LOCALE_EN:"English"}}),"./zh-CN.ts":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{ROUTER_HOME:"主页",ROUTER_ABOUT:"关于",ROUTER_COUNTER:"计数",ROUTER_AXIOS:"网络请求",ROUTER_TEST:"测试",ROUTER_MOCK:"数据模拟",ROUTER_VUEUSE:"VueUse",LOGIN_USERNAME:"用户名",LOGIN_PASSWORD:"密码",LOGIN_CONFIRM:"确认密码",LOGIN_LOGIN:"登录",LOGIN_RESET:"重置",LOGIN_MESSAGE_INPUT_PASSWORD:"请输入密码",LOGIN_MESSAGE_INPUT_PASSWORD_AGAIN:"请重复输入密码",LOGIN_MESSAGE_CONFIRM_PASSWORD:"第二次与第一次输入不匹配！",LOGIN_MESSAGE_SUCCESSED:"登录成功",LOGIN_MESSAGE_FAILED:"登录失败",TOKEN_EXPIRE_MSG:"登录已过期，请重新登录",AUTO_LOGIN_FAIL_MESSAGE:"系统登录错误",LOGIN_FAIL_MESSAGE:"用户名或密码错误",LOGIN_SUCCESS_MESSAGE:"登录成功",SYMBOL_LINEBREAKER:"\n\n",SYMBOL_QUESTIONMARK:" ？",SERVER_DATA_ERROR:"获取数据错误，请稍后重试",OK_TEXT:"确认",CANCEL_TEXT:"取消",DELETE_TITLE:"删除",DELETE_CONTENT:"您确认要删除吗？",LOCALE_ZH:"中文",LOCALE_EN:"英文"}})})});var Re,Te;(Te=Re||(Re={})).SIGN="user/SIGN",Te.SIGNOUT="user/SIGNOUT",Te.CHECK="user/CHECK",Te.ON_SET_USER="user/ON_SET_USER",Te.ON_CLEAR_USER="user/ON_CLEAR_USER",Te.GETTER_USER="user/GETTER_USER";const{t:pe}=ue.global,me=()=>{const e=Qe(),t={token:{NO_LOGIN:"NO_LOGIN",NO_TOKEN:"NO_TOKEN",TOKEN_REFRESH:300}};return new Promise(((a,s)=>{e.dispatch(Re.CHECK).then((e=>{a(e)})).catch((e=>{e===t.token.NO_TOKEN&&Le(pe("TOKEN_EXPIRE_MSG")),s(e)}))}))},Se=e=>{const t=Qe();return new Promise(((a,s)=>{t.dispatch(Re.SIGN,e).then((()=>{a(e)})).catch((e=>{s(e)}))}))};var de,he,Ne,Ie;(he=de||(de={})).JSON="application/json;charset=UTF-8",he.FORM="application/x-www-form-urlencoded; charset=UTF-8",he.TEXT="text/xml",he.BLOB="blob",he.FORMDATA="multipart/form-data",he.Other="application/octet-stream",he.Arraybuffer="arraybuffer",(Ie=Ne||(Ne={})).GET="GET",Ie.POST="POST",Ie.PUT="PUT",Ie.PATCH="PATCH",Ie.DELETE="DELETE";const Ue=e=>_t.replace({name:Oe.ROUTER_ERROR,params:{msg:e}}),Ae=(e,t,a)=>{d.success(e,t,a)},Le=(e,t,a)=>{d.warning(e,t,a)},ge={API_LOGIN:"v1/user/login",API_REFRESH_TOKEN:"v1/user/refresh",API_LOG_INDEX:"v1/log/index",API_AXIOS_USER:"users/GavinHome",API_MOCK_GET:"test/get"},Ge=[ge.API_LOGIN,ge.API_AXIOS_USER,ge.API_LOG_INDEX,ge.API_MOCK_GET],{t:fe}=ue.global,ve=async e=>{e.headers=Object.assign(e.headers,{"Cache-Control":"no-cache"});const t=(a=e.url)?a.indexOf("?")>-1?a.split("?")[0]:a:"";var a,s;if((s=t)&&Ge.every((e=>e!==s)))if(t===ge.API_REFRESH_TOKEN){const t=Qe(),{token:a}=t.getters[Re.GETTER_USER];!e.headers.Authorization&&a&&(e.headers.Authorization=`Bearer ${a}`)}else me().then((t=>{e.headers.Authorization=`Bearer ${t}`})).catch((()=>{Le(fe("TOKEN_EXPIRE_MSG")),_t.replace({name:Oe.ROUTER_LOGIN,params:{redirect:_t.currentRoute.value.fullPath}})}));e.method===Ne.GET.toLowerCase()&&(e.params=e.params||{},Object.assign(e.params,{timestamp:(new Date).getTime()}))};var Ce=class{constructor(){this.axios=(e=>{const t=h.create({baseURL:e,timeout:6e7,responseType:"json",headers:{"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache"}});return t.interceptors.request.use((async e=>(await ve(e),e)),(e=>Promise.reject(e))),t.interceptors.response.use((e=>e),(e=>(e&&e.toString().indexOf("500")>0&&Ue(e),Promise.reject(e)))),t})("https://api.github.com")}static getInstance(){return this.instance instanceof this==!1&&(this.instance=new this),this.instance}base(e){const t=null==e.contentType?de.JSON:e.contentType,{data:a}=e,s=o({"Content-Type":t},e.headers),n=null!=e.responseType?e.responseType:"json",r=e.method||Ne.POST;return this.axios.request({method:r,url:e.url,data:JSON.stringify(a),headers:s,responseType:n}).catch((e=>this.handelResquestError(e)))}async get(e,t,a=!0){const s=await this.axios.get(e,{params:t}).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}async post(e,t,a=!0){const s=await this.axios.post(e,JSON.stringify(t)).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}async put(e,t,a=!0){const s=await this.axios.put(e,JSON.stringify(t)).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}async patch(e,t,a=!0){const s=await this.axios.patch(e,JSON.stringify(t)).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}async delete(e,t,a=!0){const s=await this.axios.delete(e,{data:t}).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}handelResponse(e,t=!0){try{if(200===e.status){if(t){const t=e.data;return!1===t.isSuccess&&Ue(t.message),t.result}return e.data}Ue(e.statusText);const a=new Error(e.statusText);return this.handelResquestError(a,e)}catch(a){return this.handelResquestError(a,e)}}handelResquestError(e,t=null){throw((e,t)=>{xe(e,t)})(e,null),e}}.getInstance();const ye=async(e,t,a=!0)=>await Ce.get(e,t,a),Pe=async(e,t,a=!0)=>await Ce.post(e,t,a),Me=(e,t)=>Pe(ge.API_LOGIN,{username:e,password:t},!1),we=()=>Pe(`${ge.API_REFRESH_TOKEN}`,{},!1),ke=()=>ye(ge.API_AXIOS_USER,{},!1),De=e=>Pe(`${ge.API_LOG_INDEX}`,e),be=()=>({apiRefreshToken:we,apiAxiosUser:ke,apiLogError:De,apiLogin:Me}),xe=(e,t)=>{const a=location.href,s={entryName:"vue3+vite+template, 正式环境",version:"%BUILDNUMBER%, %REVISION%",message:e.message,metaData:{user:Qe().getters[Re.GETTER_USER]},name:e.name,releaseStage:"production",severity:e.name,stacktrace:e.stacktrace,time:Date.now(),title:"handle response error",type:"HTTP Response",url:a,client:{userAgent:window.navigator.userAgent,height:window.screen.height,width:window.screen.width,referrer:window.document.referrer},data:t,error:e,lineNumber:null,columnNumber:null,fileName:a,pageLevel:null};be().apiLogError(s).catch((e=>{}))},{t:Ke}=ue.global,He=Ke("OK_TEXT");Ke("CANCEL_TEXT"),Ke("DELETE_TITLE"),Ke("DELETE_CONTENT");const je=(e,t,a,s=He)=>{N.success({title:e,content:t,onOk:a,okText:s})},Be=(e,t,a,s=He)=>{N.warning({title:e,content:t,onOk:a,okText:s})},Fe={id:"",name:"",token:"",expiration:0},Xe={state:()=>Fe,mutations:{[Re.ON_SET_USER]:(e,t)=>{e.id=t.id,e.name=t.name,e.token=t.token,e.expiration=t.expiration},[Re.ON_CLEAR_USER]:e=>{e.id="",e.name="",e.token="",e.expiration=0}},actions:{[Re.SIGN]:async({commit:e},t)=>e(Re.ON_SET_USER,t),[Re.SIGNOUT]:async({commit:e})=>e(Re.ON_CLEAR_USER),[Re.CHECK]:({commit:e,dispatch:t,state:a})=>new Promise((async(e,s)=>{const n={token:{NO_LOGIN:"NO_LOGIN",NO_TOKEN:"NO_TOKEN",TOKEN_REFRESH:300}},o=be();if(a.token){const r=I(a.expiration).toDate(),E=I().toDate();if(E>r)await t(Re.SIGN),s(n.token.NO_TOKEN);else{if(I(r).subtract(n.token.TOKEN_REFRESH,"second").toDate()<=E){const a=await o.apiRefreshToken();a.isSuccess&&a.result?await t(Re.SIGN,a.result):s(n.token.NO_TOKEN),e(a.result.token)}else e(a.token)}}else s(n.token.NO_LOGIN)}))},getters:{[Re.GETTER_USER]:e=>e}};var Ve,qe;(qe=Ve||(Ve={})).increment="app/increment",qe.onIncrement="app/onIncrement",qe.lang="app/lang",qe.onLang="app/onLang";const $e={count:10,lang:"zh-CN"},ze={state:()=>$e,mutations:{[Ve.onIncrement]:e=>{e.count+=1},[Ve.onLang]:(e,t)=>{e.lang=t}},actions:{[Ve.increment]:e=>{e.commit(Ve.onIncrement)},[Ve.lang]:(e,t)=>{e.commit(Ve.onLang,t)}},getters:{}},We={count:0},Je=Symbol("vue-store"),Ye=U({state:()=>We,mutations:{increment(e){e.count+=1}},actions:{increment(e){e.commit("increment")}},getters:{double:e=>2*e.count},modules:{user:Xe,app:ze},plugins:[A({key:"vue3+vite+ts",storage:window.sessionStorage,paths:["app","user"]})]});function Qe(){return Ye}function Ze(){var e,t;return null==(t=null==(e=L(Je))?void 0:e.state)?void 0:t.user}function et(){var e,t;return null==(t=null==(e=L(Je))?void 0:e.state)?void 0:t.app}var tt="/vue3-vite-template/assets/logo.03d6d6da.png",at=g({name:"logo-tsx",setup:()=>()=>G(f,null,[G("div",{class:"logo-tsx"},[G("img",{src:tt,alt:"logo",width:"30",style:"margin:0px 10px"},null),"vue3+vite+template"])])});const st=F();D("data-v-2e573cf9");const nt={class:"logo"},ot={class:"lang"};b();var rt=g({expose:[],setup(e){const t=x(),{t:a}=v(),s=v(),n=C((()=>[{key:Oe.ROUTER_HOME,title:a("ROUTER_HOME")},{key:Oe.ROUTER_ABOUT,title:a("ROUTER_ABOUT")},{key:Oe.ROUTER_COUNTER,title:a("ROUTER_COUNTER")},{key:Oe.ROUTER_AXIOS,title:a("ROUTER_AXIOS")},{key:Oe.ROUTER_TEST,title:a("ROUTER_TEST")},{key:Oe.ROUTER_MOCK,title:a("ROUTER_MOCK")},{key:Oe.ROUTER_VUEUSE,title:a("ROUTER_VUEUSE")}])),o=y([]),r=async e=>{await t.push({name:e.key})},c=e=>{const t=e.replace("/","");n.value.find((e=>e.key===t))?o.value=[t]:o.value=[Oe.ROUTER_HOME]};P((()=>t.currentRoute.value),(e=>{c(e.path)})),M((()=>{t.isReady().then((()=>{c(t.currentRoute.value.path)}))}));const _=et()||{lang:"en-US"},l=Qe(),{lang:O}=w(_);function u(e){s.locale.value=e,l.dispatch(Ve.lang,e)}return s.locale.value=O.value,(e,t)=>(E(),i(k(te),{mode:"horizontal",selectedKeys:o.value,"onUpdate:selectedKeys":t[2]||(t[2]=e=>o.value=e),onClick:r},{default:st((()=>[G("div",nt,[G(k(at))]),(E(!0),i(f,null,K(k(n),(e=>(E(),i(k(ae),{key:e.key},{default:st((()=>[j(B(e.title),1)])),_:2},1024)))),128)),G("div",ot,[G(k(se),{"default-value":"en-US",value:k(O),"onUpdate:value":t[1]||(t[1]=e=>H(O)?O.value=e:null),onChange:u},{default:st((()=>[G(k(ne),{value:"en-US"},{default:st((()=>[j(B(k(a)("LOCALE_EN")),1)])),_:1}),G(k(ne),{value:"zh-CN"},{default:st((()=>[j(B(k(a)("LOCALE_ZH")),1)])),_:1})])),_:1},8,["value"])])])),_:1},8,["selectedKeys"]))}});rt.__scopeId="data-v-2e573cf9";const Et={class:"content"};var it=g({expose:[],setup:e=>(e,t)=>{const a=r("router-view");return E(),i(k(oe),{class:"layout"},{default:c((()=>[G(rt),G(k(re),null,{default:c((()=>[G("div",Et,[G(a,null,{default:c((({Component:e})=>[(E(),i(X,null,[(E(),i(_(e)))],1024))])),_:1})])])),_:1})])),_:1})}});V.configure({showSpinner:!1});const ct=[{path:"/",name:Oe.ROUTER_DASHBOARD,component:it,redirect:`${Oe.ROUTER_HOME}`,children:[{path:`/${Oe.ROUTER_HOME}`,name:Oe.ROUTER_HOME,component:()=>ee((()=>import("./Dashboard.0822cdc8.js")),["/vue3-vite-template/assets/Dashboard.0822cdc8.js","/vue3-vite-template/assets/Dashboard.fe43ffcf.css","/vue3-vite-template/assets/vendor.248a1daa.js","/vue3-vite-template/assets/vendor.765db473.css"]),meta:{title:"home"}},{path:`/${Oe.ROUTER_ABOUT}`,name:Oe.ROUTER_ABOUT,component:()=>ee((()=>import("./About.682d47ba.js")),["/vue3-vite-template/assets/About.682d47ba.js","/vue3-vite-template/assets/About.2c8fcafd.css","/vue3-vite-template/assets/vendor.248a1daa.js","/vue3-vite-template/assets/vendor.765db473.css"]),meta:{title:"about"}},{path:"/counter",name:"counter",component:()=>ee((()=>import("./Counter.c9e714d6.js")),["/vue3-vite-template/assets/Counter.c9e714d6.js","/vue3-vite-template/assets/vendor.248a1daa.js","/vue3-vite-template/assets/vendor.765db473.css"]),meta:{title:"counter"}},{path:"/axios",name:"axios",component:()=>ee((()=>import("./Axios.6a450ef7.js")),["/vue3-vite-template/assets/Axios.6a450ef7.js","/vue3-vite-template/assets/Axios.890c670d.css","/vue3-vite-template/assets/vendor.248a1daa.js","/vue3-vite-template/assets/vendor.765db473.css"]),meta:{title:"axios"}},{path:"/test",name:"test",component:()=>ee((()=>import("./Test.a0471af1.js")),["/vue3-vite-template/assets/Test.a0471af1.js","/vue3-vite-template/assets/vendor.248a1daa.js","/vue3-vite-template/assets/vendor.765db473.css"]),meta:{title:"test"}},{path:"/mock",name:"mock",component:()=>ee((()=>import("./Mock.03706cd9.js")),["/vue3-vite-template/assets/Mock.03706cd9.js","/vue3-vite-template/assets/vendor.248a1daa.js","/vue3-vite-template/assets/vendor.765db473.css"]),meta:{title:"mock",auth:!0}},{path:"/vueuse",name:"vueuse",component:()=>ee((()=>import("./VueUse.028b2fb6.js")),["/vue3-vite-template/assets/VueUse.028b2fb6.js","/vue3-vite-template/assets/vendor.248a1daa.js","/vue3-vite-template/assets/vendor.765db473.css"]),meta:{title:"vueuse"}}]},{path:`/${Oe.ROUTER_LOGIN}`,name:Oe.ROUTER_LOGIN,component:()=>ee((()=>import("./Login.294e4c2e.js")),["/vue3-vite-template/assets/Login.294e4c2e.js","/vue3-vite-template/assets/Login.90022fbc.css","/vue3-vite-template/assets/vendor.248a1daa.js","/vue3-vite-template/assets/vendor.765db473.css"]),meta:{auth:!1},props:e=>({redirect:e.query.redirect})},{path:`/${Oe.ROUTER_ERROR}`,name:Oe.ROUTER_ERROR,component:()=>ee((()=>import("./Error.9cf27dbb.js")),["/vue3-vite-template/assets/Error.9cf27dbb.js","/vue3-vite-template/assets/Error.c9029193.css","/vue3-vite-template/assets/vendor.248a1daa.js","/vue3-vite-template/assets/vendor.765db473.css"]),meta:{auth:!1}}],_t=q({history:$(),routes:ct});_t.beforeEach(((e,t,a)=>{if(V.start(),document.title="vue3+vite+template",e.meta&&e.meta.title&&(document.title+=`-${e.meta.title}`),e.meta&&e.meta.auth){const t=()=>a({name:Oe.ROUTER_LOGIN,query:{redirect:e.fullPath}});me().then((()=>a())).catch(t)}else a()})),_t.afterEach((()=>{V.done()}));(e=>{I.locale(e)})("zh-cn");const lt=J(Y);var Ot;(Ot=lt,Ot.use(z).use(W),Ot).use(ue).use(_t).use(Ye,Je).mount("#app");export{Ee as A,tt as L,Oe as R,ie as a,et as b,Ve as c,Qe as d,ye as e,Ze as f,je as g,Be as h,ge as i,ce as j,_e as k,le as l,se as m,ne as n,Ae as o,Se as p,Le as q,be as u};
