var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,o=(e,o)=>{for(var r in o||(o={}))a.call(o,r)&&n(e,r,o[r]);if(t)for(var r of t(o))s.call(o,r)&&n(e,r,o[r]);return e};import{r,o as i,c as E,w as c,a as l,b as u,d as O,e as _,h as R,f as T,g as p,u as m,i as h,j as d,F as N,M as S,S as U,k as g,l as A,m as L,n as I,p as f,t as v,q as y,s as C,v as k,x as G,y as M,z as b,A as w,B as P,C as K,L as x,K as D,N as H,D as j,E as B,R as X,G as F,H as q}from"./vendor.96710f2c.js";const $={};let z;$.render=function(e,t){const a=r("router-view");return i(),E(a,null,{default:c((({Component:e})=>[(i(),E(l(e)))])),_:1})};const V={},J=function(e,t){if(!t)return e();if(void 0===z){const e=document.createElement("link").relList;z=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in V)return;V[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":z,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((e,t)=>{s.addEventListener("load",e),s.addEventListener("error",t)})):void 0}))).then((()=>e()))};const W={ROUTER_ABOUT:"about",ROUTER_HOME:"home",ROUTER_ERROR:"error",ROUTER_DASHBOARD:"dashboard",ROUTER_LOGIN:"login",ROUTER_AXIOS:"axios",ROUTER_COUNTER:"counter",ROUTER_TEST:"test",ROUTER_MOCK:"mock"};var Y,Z;(Z=Y||(Y={})).SIGN="use/SIGN",Z.SIGNOUT="use/SIGNOUT",Z.CHECK="use/CHECK",Z.ON_SET_USER="use/ON_SET_USER",Z.ON_CLEAR_USER="use/ON_CLEAR_USER";const Q=()=>{var e;const t=Pe();return null==(e=null==t?void 0:t.state)?void 0:e.user},ee=()=>Pe().dispatch(Y.CHECK),te=()=>({getUser:Q,checkToken:ee}),ae={API_LOGIN:"v1/user/login",API_REFRESH_TOKEN:"api/v1/user/refresh",API_LOG_INDEX:"v1/log/index",API_AXIOS_USER:"users/GavinHome",API_MOCK_GET:"test/get"},se=[ae.API_LOGIN,ae.API_AXIOS_USER,ae.API_LOG_INDEX,ae.API_MOCK_GET],ne=()=>Le().post(`${ae.API_REFRESH_TOKEN}`),oe=()=>Le().get(ae.API_AXIOS_USER,{},!1),re=e=>Le().post(`${ae.API_LOG_INDEX}`,e),ie=()=>({apiRefreshToken:ne,apiAxiosUser:oe,apiLogError:re}),Ee=(e,t)=>{const a=location.href,s={entryName:"vue3+vite+template, 正式环境",version:"%BUILDNUMBER%, %REVISION%",message:e.message,metaData:{user:te().getUser()},name:e.name,releaseStage:"production",severity:e.name,stacktrace:e.stacktrace,time:Date.now(),title:"handle response error",type:"HTTP Response",url:a,client:{userAgent:window.navigator.userAgent,height:window.screen.height,width:window.screen.width,referrer:window.document.referrer},data:t,error:e,lineNumber:null,columnNumber:null,fileName:a,pageLevel:null};ie().apiLogError(s).catch((e=>{}))},ce=(e,t,a)=>{u.success(e,t,a)},le=(e,t,a)=>{u.warning(e,t,a)},ue=(e,t,a)=>{u.info(e,t,a)},Oe=(e,t,a)=>{u.error(e,t,a)},_e=()=>({openSuccessMsg:ce,openWarnMsg:le,openInfoMsg:ue,openErrorMsg:Oe});var Re,Te,pe,me;(Te=Re||(Re={})).JSON="application/json;charset=UTF-8",Te.FORM="application/x-www-form-urlencoded; charset=UTF-8",Te.TEXT="text/xml",Te.BLOB="blob",Te.FORMDATA="multipart/form-data",Te.Other="application/octet-stream",Te.Arraybuffer="arraybuffer",(me=pe||(pe={})).GET="GET",me.POST="POST",me.PUT="PUT",me.PATCH="PATCH",me.DELETE="DELETE";const he=O({legacy:!1,locale:"en-US",messages:(e=>{const t={};return Object.keys(e).forEach((a=>{if(e[a].default){const s=a.substr(a.lastIndexOf("/")+1).replace(".ts","");t[s]?t[s]=o(o({},e[s]),e[a].default):t[s]=e[a].default}})),t})({"./en-US.ts":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{ROUTER_HOME:"Home",ROUTER_ABOUT:"About",ROUTER_COUNTER:"Counter",ROUTER_AXIOS:"Axios",ROUTER_TEST:"Test",ROUTER_MOCK:"Mock",TOKEN_EXPIRE_MSG:"Login has expired, please log in again",AUTO_LOGIN_FAIL_MESSAGE:"Login error",LOGIN_FAIL_MESSAGE:"Wrong user name or password",LOGIN_SUCCESS_MESSAGE:"Login successful",SYMBOL_LINEBREAKER:"\n\n",SYMBOL_QUESTIONMARK:" ？",SERVER_DATA_ERROR:"Error data, please try again later",OK_TEXT:"Ok",CANCEL_TEXT:"Cancel",DELETE_TITLE:"Delete",DELETE_CONTENT:"Are you sure you want to delete?",LOCALE_ZH:"Chinese",LOCALE_EN:"English"}}),"./zh-CN.ts":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{ROUTER_HOME:"主页",ROUTER_ABOUT:"关于",ROUTER_COUNTER:"计数",ROUTER_AXIOS:"网络请求",ROUTER_TEST:"测试",ROUTER_MOCK:"数据模拟",TOKEN_EXPIRE_MSG:"登录已过期，请重新登录",AUTO_LOGIN_FAIL_MESSAGE:"系统登录错误",LOGIN_FAIL_MESSAGE:"用户名或密码错误",LOGIN_SUCCESS_MESSAGE:"登录成功",SYMBOL_LINEBREAKER:"\n\n",SYMBOL_QUESTIONMARK:" ？",SERVER_DATA_ERROR:"获取数据错误，请稍后重试",OK_TEXT:"确认",CANCEL_TEXT:"取消",DELETE_TITLE:"删除",DELETE_CONTENT:"您确认要删除吗？",LOCALE_ZH:"中文",LOCALE_EN:"英文"}})})}),{t:de}=he.global,Ne=async e=>{e.headers=Object.assign(e.headers,{"Cache-Control":"no-cache"});const t=(a=e.url)?a.indexOf("?")>-1?a.split("?")[0]:a:"";var a,s;if((s=t)&&se.every((e=>e!==s)))if(t===ae.API_REFRESH_TOKEN){if(!e.headers.Authorization){const t=te().getUser();e.headers.Authorization=`Bearer ${t.token}`}}else te().checkToken().then((t=>{e.headers.Authorization=`Bearer ${t}`})).catch((()=>{_e().openWarnMsg(de("TOKEN_EXPIRE_MSG")),ze.replace({name:W.ROUTER_LOGIN,params:{redirect:ze.currentRoute.value.fullPath}})}));e.method===pe.GET.toLowerCase()&&(e.params=e.params||{},Object.assign(e.params,{timestamp:(new Date).getTime()}))},Se=e=>ze.replace({name:W.ROUTER_ERROR,params:{msg:e}}),Ue=(e,t)=>Ee(e,t),ge=_.create({baseURL:"https://api.github.com",timeout:6e7,responseType:"json",headers:{"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache"}});ge.interceptors.request.use((async e=>(await Ne(e),e)),(e=>Promise.reject(e))),ge.interceptors.response.use((e=>e),(e=>(e&&e.toString().indexOf("500")>0&&Se(e),Promise.reject(e))));var Ae=class{constructor(){this.axios=ge}static getInstance(){return this.instance instanceof this==!1&&(this.instance=new this),this.instance}base(e){const t=null==e.contentType?Re.JSON:e.contentType,{data:a}=e,s=o({"Content-Type":t},e.headers),n=null!=e.responseType?e.responseType:"json",r=e.method||pe.POST;return this.axios.request({method:r,url:e.url,data:JSON.stringify(a),headers:s,responseType:n}).catch((e=>this.handelResquestError(e)))}async get(e,t,a=!0){const s=await this.axios.get(e,{params:t}).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}async post(e,t,a=!0){const s=await this.axios.post(e,JSON.stringify(t)).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}async put(e,t,a=!0){const s=await this.axios.put(e,JSON.stringify(t)).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}async patch(e,t,a=!0){const s=await this.axios.patch(e,JSON.stringify(t)).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}async delete(e,t,a=!0){const s=await this.axios.delete(e,{data:t}).catch((e=>this.handelResquestError(e)));return this.handelResponse(s,a)}handelResponse(e,t=!0){try{if(200===e.status){if(t){const t=e.data;return!1===t.isSuccess&&Se(t.message),t.result}return e.data}Se(e.statusText);const a=new Error(e.statusText);return this.handelResponseError(a,e)}catch(a){return this.handelResponseError(a,e)}}handelResquestError(e){throw Ue(e,null),e}handelResponseError(e,t){throw Ue(e,t),e}}.getInstance();function Le(){return Ae}const{t:Ie}=he.global;Ie("OK_TEXT"),Ie("CANCEL_TEXT"),Ie("DELETE_TITLE"),Ie("DELETE_CONTENT");const fe={id:"",name:"",token:"",tokenExpiration:0},ve={state:()=>fe,mutations:{[Y.ON_SET_USER]:(e,t)=>{e.id=t.id,e.name=t.name,e.token=t.token,e.tokenExpiration=t.tokenExpiration},[Y.ON_CLEAR_USER]:e=>{e.id="",e.name="",e.token="",e.tokenExpiration=0}},actions:{[Y.SIGN]:async({commit:e},t)=>e(Y.ON_SET_USER,t),[Y.SIGNOUT]:async({commit:e})=>e(Y.ON_CLEAR_USER),[Y.CHECK]:({commit:e,dispatch:t,state:a})=>new Promise((async(e,s)=>{const n={token:{NO_LOGIN:"NO_LOGIN",NO_TOKEN:"NO_TOKEN",TOKEN_REFRESH:300}},o=ie();if(a.token){const r=R(a.tokenExpiration).toDate(),i=R().toDate();if(i>r)await t(Y.SIGN),s(n.token.NO_TOKEN);else{if(R(r).subtract(n.token.TOKEN_REFRESH,"second").toDate()<=i){const a=await o.apiRefreshToken();a.isSuccess&&a.result?await t(Y.SIGN,a.result):s(n.token.NO_TOKEN),e(a.result.token)}else e(a.token)}}else s(n.token.NO_LOGIN)}))},getters:{}};var ye,Ce;(Ce=ye||(ye={})).increment="app/increment",Ce.onIncrement="app/onIncrement",Ce.lang="app/lang",Ce.onLang="app/onLang";const ke={count:10,lang:"zh-CN"},Ge={state:()=>ke,mutations:{[ye.onIncrement]:e=>{e.count+=1},[ye.onLang]:(e,t)=>{e.lang=t}},actions:{[ye.increment]:e=>{e.commit(ye.onIncrement)},[ye.lang]:(e,t)=>{e.commit(ye.onLang,t)}},getters:{}},Me={count:0},be=Symbol("vue-store"),we=T({state:()=>Me,mutations:{increment(e){e.count+=1}},actions:{increment(e){e.commit("increment")}},getters:{double:e=>2*e.count},modules:{user:ve,app:Ge},plugins:[p({key:"vue3+vite+ts",storage:window.sessionStorage,paths:["app"]})]});function Pe(){return m(be)}var Ke="/vue3-vite-template/assets/logo.03d6d6da.png",xe=h({name:"logo-tsx",setup:()=>()=>d(N,null,[d("div",{class:"logo-tsx"},[d("img",{src:Ke,alt:"logo",width:"30",style:"margin:0px 10px"},null),"vue3+vite+template"])])});const De=K();C("data-v-a69a6778");const He={class:"logo"},je={class:"lang"};k();var Be=h({expose:[],setup(e){const t=S,a=S.Item,s=U,n=U.Option,o=G(),{t:r}=g(),c=g(),l=A((()=>[{key:W.ROUTER_HOME,title:r("ROUTER_HOME")},{key:W.ROUTER_ABOUT,title:r("ROUTER_ABOUT")},{key:W.ROUTER_COUNTER,title:r("ROUTER_COUNTER")},{key:W.ROUTER_AXIOS,title:r("ROUTER_AXIOS")},{key:W.ROUTER_TEST,title:r("ROUTER_TEST")},{key:W.ROUTER_MOCK,title:r("ROUTER_MOCK")}])),u=L([]),O=async e=>{await o.push({name:e.key})},_=e=>{const t=e.replace("/","");l.value.find((e=>e.key===t))?u.value=[t]:u.value=[W.ROUTER_HOME]};I((()=>o.currentRoute.value),(e=>{_(e.path)})),f((()=>{o.isReady().then((()=>{_(o.currentRoute.value.path)}))}));const R=Pe(),{lang:T}=v(R.state.app);function p(e){c.locale.value=e,R.dispatch(ye.lang,e)}return c.locale.value=T.value,(e,o)=>(i(),E(y(t),{mode:"horizontal",selectedKeys:u.value,"onUpdate:selectedKeys":o[2]||(o[2]=e=>u.value=e),onClick:O},{default:De((()=>[d("div",He,[d(y(xe))]),(i(!0),E(N,null,M(y(l),(e=>(i(),E(y(a),{key:e.key},{default:De((()=>[w(P(e.title),1)])),_:2},1024)))),128)),d("div",je,[d(y(s),{"default-value":"en-US",value:y(T),"onUpdate:value":o[1]||(o[1]=e=>b(T)?T.value=e:null),onChange:p},{default:De((()=>[d(y(n),{value:"en-US"},{default:De((()=>[w(P(y(r)("LOCALE_EN")),1)])),_:1}),d(y(n),{value:"zh-CN"},{default:De((()=>[w(P(y(r)("LOCALE_ZH")),1)])),_:1})])),_:1},8,["value"])])])),_:1},8,["selectedKeys"]))}});Be.__scopeId="data-v-a69a6778";const Xe={class:"content"};var Fe=h({expose:[],setup(e){const t=x,a=x.Content;return(e,s)=>{const n=r("router-view");return i(),E(y(t),{class:"layout"},{default:c((()=>[d(Be),d(y(a),null,{default:c((()=>[d("div",Xe,[d(n,null,{default:c((({Component:e})=>[(i(),E(D,null,[(i(),E(l(e)))],1024))])),_:1})])])),_:1})])),_:1})}}});const{t:qe}=he.global;H.configure({showSpinner:!1});const $e=[{path:"/",name:W.ROUTER_DASHBOARD,component:Fe,redirect:`${W.ROUTER_HOME}`,children:[{path:`/${W.ROUTER_HOME}`,name:W.ROUTER_HOME,component:()=>J((()=>import("./Dashboard.8a7a220f.js")),["/vue3-vite-template/assets/Dashboard.8a7a220f.js","/vue3-vite-template/assets/Dashboard.05700212.css","/vue3-vite-template/assets/vendor.96710f2c.js","/vue3-vite-template/assets/vendor.17eb7c29.css"]),meta:{title:"home"}},{path:`/${W.ROUTER_ABOUT}`,name:W.ROUTER_ABOUT,component:()=>J((()=>import("./About.1a9bba55.js")),["/vue3-vite-template/assets/About.1a9bba55.js","/vue3-vite-template/assets/vendor.96710f2c.js","/vue3-vite-template/assets/vendor.17eb7c29.css"]),meta:{title:"about"}},{path:"/counter",name:"counter",component:()=>J((()=>import("./Counter.7f44e452.js")),["/vue3-vite-template/assets/Counter.7f44e452.js","/vue3-vite-template/assets/vendor.96710f2c.js","/vue3-vite-template/assets/vendor.17eb7c29.css"]),meta:{title:"counter"}},{path:"/axios",name:"axios",component:()=>J((()=>import("./Axios.4a441f16.js")),["/vue3-vite-template/assets/Axios.4a441f16.js","/vue3-vite-template/assets/Axios.e964ccc7.css","/vue3-vite-template/assets/vendor.96710f2c.js","/vue3-vite-template/assets/vendor.17eb7c29.css"]),meta:{title:"axios"}},{path:"/test",name:"test",component:()=>J((()=>import("./Test.f93c660c.js")),["/vue3-vite-template/assets/Test.f93c660c.js","/vue3-vite-template/assets/vendor.96710f2c.js","/vue3-vite-template/assets/vendor.17eb7c29.css"]),meta:{title:"test"}},{path:"/mock",name:"mock",component:()=>J((()=>import("./Mock.00a3854b.js")),["/vue3-vite-template/assets/Mock.00a3854b.js","/vue3-vite-template/assets/vendor.96710f2c.js","/vue3-vite-template/assets/vendor.17eb7c29.css"]),meta:{title:"mock"}}]},{path:`/${W.ROUTER_LOGIN}`,name:W.ROUTER_LOGIN,component:()=>J((()=>import("./Login.353c2ae8.js")),["/vue3-vite-template/assets/Login.353c2ae8.js","/vue3-vite-template/assets/vendor.96710f2c.js","/vue3-vite-template/assets/vendor.17eb7c29.css"]),meta:{auth:!1}},{path:`/${W.ROUTER_ERROR}`,name:W.ROUTER_ERROR,component:()=>J((()=>import("./Error.e56aa4b3.js")),["/vue3-vite-template/assets/Error.e56aa4b3.js","/vue3-vite-template/assets/Error.8c3ed8c4.css","/vue3-vite-template/assets/vendor.96710f2c.js","/vue3-vite-template/assets/vendor.17eb7c29.css"]),meta:{auth:!1}}],ze=j({history:B(),routes:$e});ze.beforeEach(((e,t,a)=>{if(H.start(),document.title="vue3+vite+template",e.meta&&e.meta.title&&(document.title+=`-${e.meta.title}`),e.meta&&e.meta.auth){const t={token:{NO_LOGIN:"NO_LOGIN",NO_TOKEN:"NO_TOKEN",TOKEN_REFRESH:300}};te().checkToken().then((()=>{a()})).catch((s=>{s===t.token.NO_TOKEN&&_e().openWarnMsg(qe("TOKEN_EXPIRE_MSG")),a({name:W.ROUTER_LOGIN,query:{redirect:e.fullPath}})}))}else a()})),ze.afterEach((()=>{H.done()}));(e=>{R.locale(e)})("zh-cn");const Ve=q($);var Je;(Je=Ve,Je.use(X).use(F),Je).use(he).use(ze).use(we,be).mount("#app");export{ye as A,W as R,Ke as _,Pe as a,Le as b,ae as c,ie as u};
